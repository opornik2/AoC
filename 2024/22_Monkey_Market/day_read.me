tags: algebraic math calc, data structures
edge cases: first price change does not count! should not be appended as 0
problems: proepare data structures for keeping prices, prices change sequence, value for each quadruple of changes; make proper loops for everything
improve: some dicts are not necessary and slow down counting. Better to use just lists and iterate over them more times.  
algo:
